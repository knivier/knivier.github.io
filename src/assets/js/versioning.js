document.querySelectorAll('.version').forEach(item => {
    item.addEventListener('click', event => {
        const versionId = event.currentTarget.id;
        const changelogText = getChangelogText(versionId);
        document.getElementById('changelog-text').innerHTML = changelogText;
        const changelogModal = document.getElementById('changelog');
        changelogModal.style.display = 'block'; // Ensure the modal is displayed
        changelogModal.classList.add('show');
    });
});

document.querySelector('.close').addEventListener('click', () => {
    const changelogModal = document.getElementById('changelog');
    changelogModal.classList.remove('show');
    setTimeout(() => {
        changelogModal.style.display = 'none'; // Reset display property after animation
    }, 500); // Match the duration of the opacity transition
});
function goBackHome() {
    window.location.href = 'activerseinfo.html';
}


function getChangelogText(versionId) {
    const changelogs = {
        'v1.3.2': `
        <h2>v1.3.2 - Half year update | Breakout included</h2>
        <p>January 29, 2025</p>
        <p><strong>The changes:</strong></p>
        <ul>
        <li>üéÆ Breakout Game Demo</li>
        <li>All comments are updated; Javadocs are NOT</li>
        <li>Volume controls for sounds implemented using setVolume() [accepting float 0 and 1 values] and getVolume()</li>
        <li>GameLoop error for run() 7A.IO reported</li>
        <li>Updated World ticks are now shown in debug menu</li>
        <li>Log dumps are now better formatted and include system tick monitoring, heap memory usages and garbage times</li>
        <li>Default FPS implementation is 60fps</li>
        <li>World can now be paused and resumed</li>
        <li>A breakout game is now implemented!</li>
        </ul>
        <p>The breakout game was taken from Activerse Examples and shown as a "Demo" game. This will not be provided in the official NSI install. 
            Many unspoken updates were made on this game; check GitHub release info for more on that.
        </p>
        <p>This version is backwards compatible with up to v1.0.7 (with some minor porting). </p>
        `,

        'v1.3.1': `
        <h2>v1.3.1 - ACEHS and Safety</h2>
        <p>November 7, 2024</p> 
        <p><strong>The changes:</strong></p>
        <ul>
        <li>üõ°Ô∏è Lots of Null Safety</li>
        <ul>
            <li>Added extensive null safety checks to prevent unexpected issues.</li>
        </ul>
        <li>‚öôÔ∏è Enhanced Concurrent Error Handling</li>
        <ul>
            <li>Implemented more specific handling systems to manage concurrent errors effectively.</li>
        </ul>
        <li>üîß ACEHS (Activerse Concurrent Error Handling System)</li>
        <ul>
            <li>Our new system for managing concurrent errors with detailed error codes, all explained here in the README!</li>
        </ul>
        <li>‚òï JDK20+ Lambda Compatibility</li>
        <ul>
            <li>Lambda expressions are now JDK20+ friendly, while the minimum suggested JDK version remains JDK23.</li>
        </ul>
        <li>‚è±Ô∏è Tick Variable Update</li>
        <ul>
            <li>Changed the tick variable from int to long for greater flexibility.</li>
        </ul>
        </ul>
        <p>This update includes significant enhancements to error handling, null safety, and concurrent error management.</p>
        <p>This version is backwards compatible with up to v1.0.7 (with some minor porting). </p>

        `,

        'v1.3.0': `
        <h2>v1.3.0 - A Bigger Than Expected Update! üöÄ</h2>
        <p>September 27, 2024</p>
        <p><strong>The changes:</strong></p>>
        <ul>
            <li>üìù Added JavaDoc Documentation</li>
            <ul>
                <li>Viewable at <a href="https://knivier.com/activerseinfo">Activerse Java Docs</a>, the Javadocs are web-viewable documents generated by Java‚Äôs own systems.</li>
            </ul>
            <li>üí¨ Commenting Overhauls</li>
            <ul>
                <li>All classes have been updated with significantly better commenting. Nearly every method is now detailed and clearly commented, even the most basic ones!</li>
            </ul>
            <li>üñ±Ô∏è Updated Mouse Inputs</li>
            <ul>
                <li>Completely overhauled mouse inputs for better reliability and accuracy after recognizing issues with the previous system. I (Knivier) apologize for this major issue!</li>
            </ul>
            <li>üîÑ Code Reformats</li>
            <ul>
                <li>Methods have been reorganized and refactored for improved consistency.</li>
            </ul>
            <li>‚ö†Ô∏è Error Message Details</li>
            <ul>
                <li>Improved error messages provide better understanding for both beginners and advanced programmers, along with detailed stack traces.</li>
            </ul>
            <li>üîí Fixed a Security Bug Related to Constructors</li>
            <ul>
                <li>Addressed a potential security issue where constructors in world subclasses could leak information.</li>
            </ul>
            <li>üìñ Updated the README</li>
            <ul>
                <li>More information has been added, including the reedition of the research profilers from update v1.1.2.</li>
            </ul>
            <li>üîç Updated Null Safety Systems</li>
            <ul>
                <li>This **CRITICAL** update improves bug resolution practices and makes using your own graphics easier, while still requiring an image per actor.</li>
            </ul>
            <li>üìè Added the getWidth Method to Actors</li>
            <ul>
                <li>Finally added the much-needed getWidth method to actors!</li>
            </ul>
            <li>ü§ñ Added A-* Path Finding!</li>
            <ul>
                <li>New pathfinding feature using \`useAStar(Actor toFollow, int iterations)\` method, introducing a bit of AI to Activerse.</li>
            </ul>
            <li>üîç Debug Information Changes on Screen</li>
            <ul>
                <li>Debug information via the debug button has changed for better readability.</li>
            </ul>
            <li>üìù Debug Information on Logging</li>
            <ul>
                <li>Log sessions now show the date only, with log notes displaying just the time for clarity.</li>
            </ul>
            <li>üåü Instance Window Update</li>
            <ul>
                <li>Each instance now shows **v1.3.0**.</li>
            </ul>
        </ul>
        <p>This update includes significant enhancements to documentation, mouse handling, and pathfinding, as well as critical bug fixes.</p>
        <p>This version is backwards compatible with up to v1.0.7 (with some minor porting). </p>

    `,
        'v1.2.1':`
    <h2>v1.2.1 - Minor Grief Removed</h2>
    <p>September 12, 2024</p>
    <p><strong>The changes:</strong></p>
    <ul>
        <li>File changes include:</li>
        <ul>
            <li>üõ†Ô∏è Enhanced error handling inside ActiverseEngine/Activerse.java.</li>
            <li>Property file error handling improvements.</li>
            <li>üìä Added heap usage monitoring methods for debugging.</li>
            <li>Updated FPS timing to fix slight variance issues.</li>
            <li>üìù High-detail documentation added in ActiverseEngine/GameLoop.java.</li>
            <li>Code reformatting for consistency and readability.</li>
            <li>üìú Added a licensing TLDR inside the ReadME.</li>
        </ul>
        <li>Other related changes:</li>
        <ul>
            <li>üñ±Ô∏è Introduced advanced mouse detection with better modification capabilities (experimental).</li>
            <li>üí∏ Added funding.yml for project support.</li>
        </ul>
    </ul>
    <p>This version includes new features for enhanced debugging and error handling, along with a demo:</p>
    <p><strong>üéÆ Hopping Game Demo:</strong> Comes as an example showcasing the engine's new capabilities, including advanced mouse detection, performance tweaks, and error handling improvements.</p>
    <p>Some features like advanced mouse detection are experimental and may require further testing.</p>
    <p>This version is backwards compatible with up to v1.0.7 (with some minor porting). </p>
`,

        'v1.2.0':`
            <h2>v1.2.0</h2>
            <p>July 22, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>File changes include:</li>
                <ul>
                <li>Formatting to code</li>
                <li>Updated license</li>
                <li>Updated Readme</li>
                <li>Removed base examples (MyWorld subclass etc)</li>
                </ul>
                <li>Other related changes:</li>
                    <ul>
                   <li>Updated header to match version</li>
                   <li>Property file modifications</li>
                   <li>Advanced implementation of dynamic lighting</li>
                   <li>Added inbuilt class to World.java</li> 
                   <li>Logging format changes to include system time</li>
                   <li>Bug fixes to variables that could've caused data leaks via rounding errors</li>
                    </ul>
            </ul>
            <p>This version is backwards compatible up to v1.0.3-theta (with file changes to structuring)</p>
            <p>Steady implementation of dynamic lighting isn't really there, so some bugs may present and dynamic lighting may not work to the fullest potential</p>
        `,
        'v1.1.2': `
            <h2>v1.1.2</h2>
            <p>July 12, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>Formatting changes to logging including:</li>
                <ul>
                    <li>New log session started</li>
                    <li>Log parts are number tracked</li>
                    <li>FPS is logged actively</li>
                    <li>TargetFPS included with activeFPS</li>
                    <li>MB/s instead of MB/sec for consistency</li>
                    <li>Fixed bug where FPS logging only occurs when debug menu is open (it now doesn't need debug menu to be open to run FPS calculations, FPS calcs are handled independently)</li>
                </ul>
                <li>Debug menu:</li>
                <ul>
                    <li>MB/s instead of MB/sec for consistency</li>
                </ul>
                <li>Engine:</li>
                <ul>
                    <li>Optimized World class for better RAM usage</li>
                    <li>Optimized some of the Actor class for better RAM usage</li>
                    <li>Fixed calculation issues for FPS by resolving using GameLoop.java to calculate FPS</li>
                    <li>TargetFPS is now a lock FPS which the game cannot exceed</li>
                    <li>Fixed collisions in Actor</li>
                </ul>
                <li>Other changes:</li>
                <ul>
                    <li>Code formatting, optimized imports, changing some variables</li>
                    <li>Fixed potential issues regarding variable limits (long to double casting)</li>
                </ul>
            </ul>
            <p>This version is backwards compatible up to v1.0.3-theta (with file changes to structuring)</p>

        `,
        'v1.1.1': `
            <h2>v1.1.1</h2>
            <p>July 5, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>file_writing in Activerse.properties is now logging</li>
                <li>Debug menu changes to formatting (showing target FPS now, MUPS to MPS (Memory Per Second))</li>
                <li>FPS is now logged alongside MPS</li>
                <li>Added velocity methods</li>
                <li>Added height changes</li>
            </ul>
              <p>Velocity and height methods were incorporated to allow you to create your own gravity system using the update() method in subclasses of World.</p>
            <p>As always, this version is backwards compatible with previous versions. We're keeping this streak as long as we can!</p>
            <p>Full Changelog: <a href="https://github.com/knivier/Activerse/compare/v1.1.0...v1.1.1">Full Changelog v1.1.0...v1.1.1</p>
            <p>This version is backwards compatible up to v1.0.3-theta (with file changes to structuring)</p>
        `,
        'v1.1.0': `
            <h2>v1.1.0</h2>
            <p>June 22, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>ReadMe updated</li>
                <li>Modifications to the default subclasses to make them cleaner</li>
                <li>Added memory Tracker.java which tracks memory, and incorporated those into debug</li>
                <li>Added Activerse.Properties and setup GameLoop and MemoryTracker.java to use those properties</li>
            </ul>
            <p>The Activerse.properties file is meant to be a simple place to change memory logging, turn off collision debugging, etc.</p>
            <p>These changes might affect the performance, so do note them down.</p>
            <p>Full Changelog: <a href="https://github.com/knivier/Activerse/compare/v1.0.9...v1.1.0">v1.0.9...v1.1.0</a></p>
            <p>This version is backwards compatible up to v1.0.3-theta (with file changes to structuring)</p>
        `,
        'v1.0.9': `
            <h2>v1.0.9</h2>
            <p>June 15, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>New GameLoop.java which controls the game Hypersmooth system</li>
                <li>GameLoop.java contains method for rendering to buffer and FPS locking</li>
                <li>Introduced concept of activeFPS and TargetFPS</li>
                <li>Added FPS monitoring into Debug menu</li>
            </ul>
            <p>Full Changelog: <a href="https://github.com/knivier/Activerse/compare/v1.0.8-delta...v1.0.9">v1.0.8-delta...v1.0.9</a></p>
            <p>This version is backwards compatible up to v1.0.3-theta (with file changes to structuring)</p>
        `,
        'v1.0.8-delta': `
            <h2>v1.0.8-delta</h2>
            <p>June 8, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>Optimized Entity and Actor classes for better performance</li>
                <p>Added "end" button in Activerse game window</p>
            </ul>
            <p>Full Changelog: Not available</p>
            <p>This version is backwards compatible up to v1.0.3-theta (with file changes to structuring)</p>
        `,
        'v1.0.7': `
            <h2>v1.0.7</h2>
            <p>May 15, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>Debug Menu now has current sounds being played</li>
                <li>It also has current keys being pressed</li>
                <li>The file hierarchy system has been completely redone</li>
                <p>Your old files will still most likely work, but updating to this new version will absolutely cause some issues. This is because all of the engine files are now in a package, and you will need to manually import those packages in each subclass.</p>
            </ul>
            <p>Full Changelog: <a href="https://github.com/knivier/Activerse/compare/v1.0.6-delta...v1.0.7-delta">v1.0.6-delta...v1.0.7</a></p>
            <p>This version is backwards compatible up to v1.0.3-theta (with file changes to structuring)</p>
        `,
        'v1.0.6-delta': `
            <h2>v1.0.6-delta</h2>
            <p>May 8, 2024</p>
            <p><strong>Debug Mode:</strong></p>
            <ul>
                <li>Introducing a new, powerful tool coming to Activerse: Debug mode</li>
                <li>Debug mode provides information regarding your game, including actors and their location, collisions, and loaded image assets</li>
                <li>Future debug features include audio files playing, keys currently being pressed, and specific Actor types</li>
            </ul>
            <p>Full Changelog: <a href="https://github.com/knivier/Activerse/compare/v1.0.5-delta...v1.0.6-delta">v1.0.5-delta...v1.0.6-delta</a></p>
            <p>This version is backwards compatible up to v1.0.3-theta</p>
        `,
        'v1.0.5-delta': `
            <h2>v1.0.5-delta</h2>
            <p>May 1, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>Added methods for game development:</li>
                <ul>
                    <li>showText() for displaying text on the world</li>
                    <li>multi-level support via Activerse.setWorld()</li>
                </ul>
                <li>Backward compatibility maintained with previous versions</li>
            </ul>
            <p>Full Changelog: <a href="https://github.com/knivier/Activerse/compare/v1.0.4-delta...v1.0.5-delta"> v1.0.4-delta...v1.0.5-delta</a></p>
            <p>This version is backwards compatible up to v1.0.3-theta</p>
        `,
        'v1.0.4-delta': `
            <h2>v1.0.4-delta</h2>
            <p>April 25, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>Critical bug fixes:</li>
                <ul>
                    <li>Fixed error when Actor is removed from world but code in World is still running</li>
                </ul>
                <li>Backward compatibility with v1.0.3 and v1.0.2</li>
            </ul>
            <p>Full Changelog: <a href="https://github.com/knivier/Activerse/compare/v1.0.3-theta...v1.0.4-delta"> v1.0.3-theta...v1.0.4-delta</a></p>
            <p>This version is backwards compatible up to v1.0.3-theta</p>
        `,
        'v1.0.3-theta': `
            <h2>v1.0.3-theta</h2>
            <p>April 18, 2024</p>
            <p><strong>The changes:</strong></p>
            <ul>
                <li>Important engine updates:</li>
                <ul>
                    <li>Added method getWorld()</li>
                    <li>Added method setWorld(World world)</li>
                    <li>Added method intersects(Actor other)</li>
                    <li>Added method removeObject(Actor actor)</li>
                    <li>Added method addObject(Actor actor, int x, int y)</li>
                    <li>Added method setBackgroundImage(String imagePath)</li>
                    <li>Added method getActors()</li>
                </ul>
                <li>Bug fixes:</li>
                <ul>
                    <li>Fixed major issues related to the rendering engine</li>
                </ul>
            </ul>
            <p>Full Changelog: <a href="https://github.com/knivier/Activerse/compare/v1.0.2-beta...v1.0.3-theta">v1.0.2...v1.0.3-theta</a></p>
        `
    };

    return changelogs[versionId] || `<p>No details available for this version.</p>`;
}
